<Window x:Class="NutritionOptimizer.UI.Views.OptimizationResultWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ìµœì í™” ê²°ê³¼"
        Height="750"
        Width="1000"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ì œëª© -->
        <TextBlock Grid.Row="0"
                   Text="ðŸŽ¯ ìµœì í™” ê²°ê³¼"
                   FontSize="24"
                   FontWeight="Bold"
                   Margin="0 0 0 12" />

        <!-- ìš”ì•½ ì •ë³´ (ì˜ì–‘ ì ìˆ˜, ì´ ë¹„ìš©) -->
        <Border Grid.Row="1" 
                Background="#F0F8FF"
                BorderBrush="#4A90E2"
                BorderThickness="2"
                CornerRadius="8"
                Padding="16"
                Margin="0 0 0 16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- ì˜ì–‘ ì ìˆ˜ -->
                <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                    <TextBlock Text="ì˜ì–‘ ì ìˆ˜" 
                               FontSize="14" 
                               Foreground="Gray"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="{Binding NutritionScore, StringFormat={}{0:N1}/100}"
                               FontSize="32" 
                               FontWeight="Bold"
                               Foreground="#2ECC71"
                               HorizontalAlignment="Center"
                               Margin="0 4 0 0" />
                </StackPanel>

                <!-- ì´ ë¹„ìš© -->
                <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                    <TextBlock Text="ì´ ë¹„ìš©" 
                               FontSize="14" 
                               Foreground="Gray"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="{Binding TotalCost, StringFormat=â‚©{0:N0}}" 
                               FontSize="32" 
                               FontWeight="Bold"
                               Foreground="#4A90E2"
                               HorizontalAlignment="Center"
                               Margin="0 4 0 0" />
                </StackPanel>

                <!-- ìŒì‹ ê°œìˆ˜ -->
                <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                    <TextBlock Text="ì„ íƒëœ ìŒì‹" 
                               FontSize="14" 
                               Foreground="Gray"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="{Binding Picks.Count, StringFormat={}{0}ê°œ}" 
                               FontSize="32" 
                               FontWeight="Bold"
                               Foreground="#E67E22"
                               HorizontalAlignment="Center"
                               Margin="0 4 0 0" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- ì„ íƒëœ ìŒì‹ -->
        <GroupBox Grid.Row="2" Header="ì„ íƒëœ ìŒì‹" Margin="0 0 0 12" FontWeight="Bold">
            <DataGrid ItemsSource="{Binding Picks}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      AlternatingRowBackground="#F9F9F9"
                      GridLinesVisibility="Horizontal"
                      RowHeight="32">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ìŒì‹ ì´ë¦„" Binding="{Binding FoodName}" Width="*" />
                    <DataGridTextColumn Header="ì–‘ (g)" Binding="{Binding AmountG, StringFormat={}{0:N1}}" Width="120" />
                    <DataGridTextColumn Header="ë¹„ìš© (ì›)" Binding="{Binding Cost, StringFormat={}{0:N0}}" Width="120" />
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <!-- ì˜ì–‘ì†Œ ë‹¬ì„± -->
        <GroupBox Grid.Row="3" Header="ì˜ì–‘ì†Œ ë‹¬ì„± í˜„í™©" Margin="0 0 0 12" FontWeight="Bold">
            <DataGrid ItemsSource="{Binding NutrientSummary}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      AlternatingRowBackground="#F9F9F9"
                      GridLinesVisibility="Horizontal"
                      RowHeight="32">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ì˜ì–‘ì†Œ" Binding="{Binding Key, Converter={StaticResource NutrientKeyConverter}}" Width="*" />
                    <DataGridTextColumn Header="ë‹¬ì„±ëŸ‰" Binding="{Binding Actual, StringFormat={}{0:N1}}" Width="100" />
                    <DataGridTextColumn Header="ëª©í‘œ" Binding="{Binding Target, StringFormat={}{0:N1}}" Width="100" />
                    <DataGridTextColumn Header="ìµœì†Œ" Binding="{Binding Min, StringFormat={}{0:N0}}" Width="80" />
                    <DataGridTextColumn Header="ìµœëŒ€" Binding="{Binding Max, StringFormat={}{0:N0}}" Width="80" />
                    <DataGridTextColumn Header="ë‹¬ì„±ë¥ " Binding="{Binding AchievementRate, StringFormat={}{0:N1}%}" Width="100">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                                <Setter Property="FontWeight" Value="SemiBold" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <!-- í•˜ë‹¨ ë²„íŠ¼ë“¤ -->
        <Grid Grid.Row="4">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="2"
                    Content="ðŸ’¾ ì‹ë‹¨ ì €ìž¥"
                    Width="120"
                    Height="40"
                    Margin="0 0 12 0"
                    Click="SaveButton_Click"
                    FontSize="14" />
            
            <Button Grid.Column="3"
                    Content="ë‹«ê¸°"
                    Width="100"
                    Height="40"
                    Click="CloseButton_Click"
                    FontSize="14" />
        </Grid>
    </Grid>
</Window>
